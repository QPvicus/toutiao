(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06419fec"],{2909:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){if(Array.isArray(t))return n(t)}r.d(e,"a",(function(){return c}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}r("fb6a"),r("25f0");function i(t,e){if(t){if("string"===typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||o(t)||i(t)||u()}},"373e":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-follow"},[r("van-nav-bar",{staticClass:"page-navbar",attrs:{"left-arrow":"",fixed:""},on:{"click-left":function(e){return t.$router.back()}}},[r("van-tabs",{attrs:{slot:"title",background:"#3296fa"},slot:"title",model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[r("van-tab",{attrs:{title:"关注",to:"/user/"+t.userId+"/follow",replace:""}},[r("follow-list")],1),r("van-tab",{attrs:{title:"粉丝",to:"/user/"+t.userId+"/follow?tab=followers",replace:""}},[r("follow-list",{attrs:{followers:""}})],1)],1)],1)],1)},a=[],o=(r("a9e3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"follow-list"},[r("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return r("van-cell",{key:n,staticClass:"follow-item"},[r("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:e.photo},slot:"icon"}),r("div",{staticClass:"user-info"},[r("div",{staticClass:"name",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.name||"默认用户")+" ")]),r("div",{staticClass:"fans",attrs:{slot:"label"},slot:"label"},[t._v("粉丝数:"+t._s(e.fans_count))])]),"followers"!==t.$route.query.tab?r("follow-user",{attrs:{slot:"right-icon",userId:e.id},slot:"right-icon",model:{value:e.is_followed,callback:function(r){t.$set(e,"is_followed",r)},expression:"item.is_followed"}},[e.is_followed?r("span",[t._v(t._s(e.mutual_follow?"互相关注":"已关注"))]):r("span",[t._v("关注")])]):r("follow-user",{attrs:{slot:"right-icon",userId:e.id},slot:"right-icon",model:{value:e.mutual_follow,callback:function(r){t.$set(e,"mutual_follow",r)},expression:"item.mutual_follow"}},[r("span",[t._v(t._s(e.mutual_follow?"相互关注":"关注"))])])],1)})),1)],1)}),i=[],u=(r("4160"),r("159b"),r("2909")),c=(r("96cf"),r("1da1")),l=r("f50e"),s=r("c24f"),f={name:"followList",components:{followUser:l["a"]},props:{followers:{type:Boolean,default:!1}},data:function(){return{list:[],loading:!1,finished:!1,page:1,per_page:20}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onLoad:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=[t.$route.params.userId,{page:t.page,per_page:t.per_page}],e.next=4,t.followers?s["b"].apply(void 0,n):s["c"].apply(void 0,n);case 4:a=e.sent,o=a.data,i=o.data.results,i.forEach((function(t){t.is_followed=!0})),(r=t.list).push.apply(r,Object(u["a"])(i)),i.lenght?t.page++:t.finished=!0,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),t.$toast.fail("获取数据失败");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}},d=f,p=(r("c726"),r("2877")),v=Object(p["a"])(d,o,i,!1,null,"23b44cdf",null),b=v.exports,m={name:"userFollow",components:{followList:b},props:{userId:{type:[String,Object,Number],required:!0}},data:function(){return{active:"followers"===this.$route.query.tab?1:0}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},h=m,g=(r("38d1"),Object(p["a"])(h,n,a,!1,null,"c0991bb8",null));e["default"]=g.exports},"38d1":function(t,e,r){"use strict";var n=r("736a"),a=r.n(n);a.a},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("7b0b"),o=r("9bdd"),i=r("e95a"),u=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,s,f,d,p,v=a(t),b="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,g=void 0!==h,w=l(v),_=0;if(g&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==w||b==Array&&i(w))for(e=u(v.length),r=new b(e);e>_;_++)p=g?h(v[_],_):v[_],c(r,_,p);else for(f=w.call(v),d=f.next,r=new b;!(s=d.call(f)).done;_++)p=g?o(f,h,[s.value,_],!0):s.value,c(r,_,p);return r.length=_,r}},5470:function(t,e,r){"use strict";var n=r("7bfa"),a=r.n(n);a.a},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),a=r("5899"),o="["+a+"]",i=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),c=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(u,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,r){var n=r("861d"),a=r("d2bb");t.exports=function(t,e,r){var o,i;return a&&"function"==typeof(o=e.constructor)&&o!==r&&n(i=o.prototype)&&i!==r.prototype&&a(t,i),t}},"736a":function(t,e,r){},"7bfa":function(t,e,r){},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:a})},a9e3:function(t,e,r){"use strict";var n=r("83ab"),a=r("da84"),o=r("94ca"),i=r("6eeb"),u=r("5135"),c=r("c6b6"),l=r("7156"),s=r("c04e"),f=r("d039"),d=r("7c73"),p=r("241c").f,v=r("06cf").f,b=r("9bf2").f,m=r("58a8").trim,h="Number",g=a[h],w=g.prototype,_=c(d(w))==h,y=function(t){var e,r,n,a,o,i,u,c,l=s(t,!1);if("string"==typeof l&&l.length>2)if(l=m(l),e=l.charCodeAt(0),43===e||45===e){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(o=l.slice(2),i=o.length,u=0;u<i;u++)if(c=o.charCodeAt(u),c<48||c>a)return NaN;return parseInt(o,n)}return+l};if(o(h,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var I,O=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof O&&(_?f((function(){w.valueOf.call(r)})):c(r)!=h)?l(new g(y(e)),r,O):y(e)},E=n?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;E.length>A;A++)u(g,I=E[A])&&!u(O,I)&&b(O,I,v(g,I));O.prototype=w,w.constructor=O,i(a,h,O)}},c24f:function(t,e,r){"use strict";r.d(e,"h",(function(){return a})),r.d(e,"i",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"j",(function(){return l})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return f})),r.d(e,"b",(function(){return d})),r.d(e,"g",(function(){return p})),r.d(e,"k",(function(){return v})),r.d(e,"l",(function(){return b}));r("d3b7"),r("25f0");var n=r("b775"),a=function(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},o=function(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},i=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user"})},u=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/channels"})},c=function(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},l=function(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},s=function(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})},f=function(t,e){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/followings",params:e,data:{target:t.toString()}})},d=function(t,e){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/followers",params:e,data:{target:t.toString()}})},p=function(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/profile"})},v=function(t){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})},b=function(t){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}},c726:function(t,e,r){"use strict";var n=r("da4a"),a=r.n(n);a.a},da4a:function(t,e,r){},f50e:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-button",{staticClass:"follow-btn",attrs:{type:t.value?"defalut":"info",size:"small",round:"",loading:t.loading},on:{click:function(e){return e.stopPropagation(),t.onFollow(e)}}},[t._t("default",[t._v(t._s(t.value?"已关注":"关注"))])],2)},a=[],o=(r("a9e3"),r("96cf"),r("1da1")),i=r("c24f"),u={name:"followUser",props:{userId:{type:[Object,String,Number],required:!0},value:{type:Boolean}},data:function(){return{loading:!1}},methods:{onFollow:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,e.prev=1,!t.value){e.next=7;break}return e.next=5,Object(i["j"])(t.userId);case 5:e.next=9;break;case 7:return e.next=9,Object(i["a"])(t.userId);case 9:t.$emit("input",!t.value),e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](1),n="操作失败，稍后重试",400===(null===(r=e.t0.response)||void 0===r?void 0:r.status)&&(n="你不能关注你自己"),t.$toast(n);case 17:t.loading=!1;case 18:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}},c=u,l=(r("5470"),r("2877")),s=Object(l["a"])(c,n,a,!1,null,"a51295ec",null);e["a"]=s.exports},fb6a:function(t,e,r){"use strict";var n=r("23e7"),a=r("861d"),o=r("e8b5"),i=r("23cb"),u=r("50c4"),c=r("fc6a"),l=r("8418"),s=r("b622"),f=r("1dde"),d=r("ae40"),p=f("slice"),v=d("slice",{ACCESSORS:!0,0:0,1:2}),b=s("species"),m=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!p||!v},{slice:function(t,e){var r,n,s,f=c(this),d=u(f.length),p=i(t,d),v=i(void 0===e?d:e,d);if(o(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?a(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(f,p,v);for(n=new(void 0===r?Array:r)(h(v-p,0)),s=0;p<v;p++,s++)p in f&&l(n,s,f[p]);return n.length=s,n}})}}]);
//# sourceMappingURL=chunk-06419fec.28f42353.js.map