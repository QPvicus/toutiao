(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ddd3ac4"],{"1cfdc":function(t,e,n){"use strict";var r=n("6562"),a=n.n(r);a.a},2423:function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"j",(function(){return d})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return p}));var r=n("b775"),a=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_1/articles",params:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})},c=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})},s=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/dislikes",data:{target:t}})},l=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/dislikes/".concat(t)})},u=function(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t,"/articles"),params:e})},d=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/articles",params:t})},f=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/article/collections",params:t})},p=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/histories",params:t})}},2909:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(Array.isArray(t))return r(t)}n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("3ca3"),n("ddb0");function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("25f0");function c(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return a(t)||i(t)||c(t)||s()}},2995:function(t,e,n){"use strict";var r=n("bbb7"),a=n.n(r);a.a},"315f":function(t,e,n){},"42f4":function(t,e,n){"use strict";var r=n("315f"),a=n.n(r);a.a},"4df4":function(t,e,n){"use strict";var r=n("0366"),a=n("7b0b"),i=n("9bdd"),c=n("e95a"),s=n("50c4"),o=n("8418"),l=n("35a1");t.exports=function(t){var e,n,u,d,f,p,h=a(t),v="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,g=void 0!==b,_=l(h),C=0;if(g&&(b=r(b,m>2?arguments[2]:void 0,2)),void 0==_||v==Array&&c(_))for(e=s(h.length),n=new v(e);e>C;C++)p=g?b(h[C],C):h[C],o(n,C,p);else for(d=_.call(h),f=d.next,n=new v;!(u=f.call(d)).done;C++)p=g?i(d,b,[u.value,C],!0):u.value,o(n,C,p);return n.length=C,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(c,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:o(1),end:o(2),trim:o(3)}},6562:function(t,e,n){},7156:function(t,e,n){var r=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,c;return a&&"function"==typeof(i=e.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(t,c),t}},"7abe":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("div",{staticClass:"app-nav-bar"},[n("div",{staticClass:"logo"}),n("van-button",{staticClass:"search-btn",attrs:{slot:"title",icon:"search",type:"info",round:"",size:"small"},on:{click:function(e){return t.$router.push("/search")}},slot:"title"},[t._v(" 搜索")])],1),t.channels.length?n("van-tabs",{ref:"tabs",staticClass:"fixed-tabs",attrs:{swipeable:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("article-list",{attrs:{channel:t}})],1)})),n("div",{staticClass:"van-tab",staticStyle:{flex:"0 0 8%"},attrs:{slot:"nav-right"},slot:"nav-right"}),n("van-icon",{staticClass:"wap-nav",attrs:{slot:"nav-right",name:"wap-nav"},on:{click:function(e){t.isChannelEditShow=!0}},slot:"nav-right"})],2):t._e(),n("van-popup",{staticClass:"channel-edit-popup",style:{height:"100%"},attrs:{position:"bottom",overlay:!1,round:""},model:{value:t.isChannelEditShow,callback:function(e){t.isChannelEditShow=e},expression:"isChannelEditShow"}},[n("van-nav-bar",{attrs:{title:"编辑频道"}},[n("van-icon",{attrs:{slot:"left",name:"cross",size:"20"},on:{click:function(e){t.isChannelEditShow=!1}},slot:"left"})],1),n("channel-edit",{attrs:{"user-channels":t.channels},on:{close:function(e){t.isChannelEditShow=!1}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}})],1)],1)},a=[],i=(n("96cf"),n("1da1")),c=n("5530"),s=n("c24f"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-list"},[n("van-pull-refresh",{attrs:{"success-text":t.refreshSuccessText,"success-duration":1500},on:{refresh:t.onRefresh},model:{value:t.isRefreshLoading,callback:function(e){t.isRefreshLoading=e},expression:"isRefreshLoading"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articles,(function(t,e){return n("article-item",{key:e,attrs:{article:t}})})),1)],1)],1)},l=[],u=n("2909"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"article-item"},[n("div",{staticClass:"title van-multi-ellipsis--l3",attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.article.title)+" ")]),n("div",{attrs:{slot:"label"},on:{click:t.onItemClick},slot:"label"},[3===t.article.cover.type?n("div",{staticClass:"cover-wrap",on:{click:t.onItemClick}},t._l(t.article.cover.images,(function(t,e){return n("div",{key:e,staticClass:"cover-wrap-item"},[n("van-image",{staticClass:"cover-image",attrs:{fit:"cover",src:t}})],1)})),0):t._e(),n("div",{staticClass:"label-wrap"},[n("span",[t._v(t._s(t.article.aut_name))]),n("span",[t._v(t._s(t.article.comm_count)+"评论")]),n("span",[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])]),1===t.article.cover.type?n("van-image",{staticClass:"right-cover",attrs:{fit:"cover",src:t.article.cover.images[0]}}):t._e()],1)},f=[],p=(n("d3b7"),n("25f0"),{name:"ArticleItem",props:{article:{type:Object,required:!0}},methods:{onItemClick:function(){this.$router.push({name:"article",params:{articleId:this.article.art_id.toString()}})}}}),h=p,v=(n("2995"),n("2877")),m=Object(v["a"])(h,d,f,!1,null,"9397cdd0",null),b=m.exports,g=n("2423"),_={name:"ArticleList",props:{channel:{type:Object,required:!0}},components:{ArticleItem:b},data:function(){return{articles:[],loading:!1,finished:!1,timestamp:null,isRefreshLoading:!1,refreshSuccessText:""}},methods:{onLoad:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["i"])({channel_id:t.channel.id,timestamp:t.timestamp||Date.now(),with_top:1});case 2:r=e.sent,a=r.data,i=a.data.results,(n=t.articles).push.apply(n,Object(u["a"])(i)),t.loading=!1,i.length?t.timestamp=a.data.pre_timestamp:t.finished=!0;case 8:case"end":return e.stop()}}),e)})))()},onRefresh:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["i"])({channel_id:t.channel.id,timestamp:Date.now(),with_top:1});case 2:r=e.sent,a=r.data,i=a.data.results,(n=t.articles).unshift.apply(n,Object(u["a"])(i)),t.isRefreshLoading=!1,t.refreshSuccessText="更新了".concat(i.length,"条数据");case 8:case"end":return e.stop()}}),e)})))()}}},C=_,w=(n("86b4"),Object(v["a"])(C,o,l,!1,null,"44b1a0f7",null)),O=w.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"channel-edit"},[n("van-cell",{attrs:{border:!1}},[n("div",{staticClass:"title-wrap",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title"},[t._v("我的频道")]),n("span",{staticClass:"tip"},[t._v("点击进入频道")])]),n("van-button",{attrs:{size:"mini",round:"",type:"danger",plain:"",color:"#e5615b"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v(t._s(t.isEdit?"完成":"编辑"))])],1),n("van-grid",{attrs:{gutter:10,clickable:""}},t._l(t.userChannels,(function(e,r){return n("van-grid-item",{key:e.id,staticClass:"channel-item",on:{click:function(n){return t.onChannelActiveOrDelete(e,r)}}},[n("span",{staticClass:"text",class:{active:t.value===r}},[t._v(t._s(e.name))]),n("van-icon",{directives:[{name:"show",rawName:"v-show",value:t.isEdit&&"推荐"!==e.name,expression:"isEdit && channel.name !== '推荐'"}],staticClass:"close-icon",attrs:{name:"close"}})],1)})),1),n("van-cell",{attrs:{border:!1}},[n("div",{staticClass:"title-wrap",attrs:{slot:"title"},slot:"title"},[n("span",{staticClass:"title"},[t._v("推荐频道")]),n("span",{staticClass:"tip"},[t._v("点击进入频道")])])]),n("van-grid",{attrs:{gutter:10,clickable:""}},t._l(t.recommendChannels,(function(e){return n("van-grid-item",{key:e.id,staticClass:"channel-item",on:{click:function(n){return t.onAddChannel(e)}}},[n("span",{staticClass:"text"},[t._v(t._s(e.name))])])})),1)],1)},x=[],j=(n("99af"),n("4de4"),n("c740"),n("a434"),n("a9e3"),n("b775")),y=function(){return Object(j["a"])({method:"GET",url:"/app/v1_0/channels"})},k=function(t){return Object(j["a"])({method:"PATCH",url:"/app/v1_0/user/channels",data:{channels:[t]}})},A=function(t){return Object(j["a"])({method:"DELETE",url:"/app/v1_0/user/channels/".concat(t)})},T=n("5d2d"),I=n("2f62"),S={name:"ChannelEdit",props:{userChannels:{type:Array,required:!0},value:{type:Number,default:0}},data:function(){return{allChannels:[],isEdit:!1}},created:function(){this.loadAllChannels()},computed:Object(c["a"])(Object(c["a"])({},Object(I["b"])(["user"])),{},{recommendChannels:function(){var t=this;return this.allChannels.filter((function(e){return-1===t.userChannels.findIndex((function(t){return t.id===e.id}))}))}}),methods:{loadAllChannels:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y();case 3:n=e.sent,r=n.data,t.allChannels=r.data.channels,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0),t.$toast("获取所有频道数据失败");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onAddChannel:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!e.user){n.next=6;break}return n.next=4,k({id:t.id,seq:e.userChannels.length});case 4:n.next=7;break;case 6:T["b"].apply(void 0,["channel"].concat(Object(u["a"])(e.userChannels),[t]));case 7:e.userChannels.push(t),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),console.log(n.t0),e.$toast("添加失败，稍后重试");case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()},onChannelActiveOrDelete:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.isEdit&&"推荐"!==t.name?n.deleteChannel(t,e):(n.$emit("input",e),n.$emit("close"));case 1:case"end":return r.stop()}}),r)})))()},deleteChannel:function(t,e){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!n.user){r.next=7;break}return r.next=4,A(t.id);case 4:n.userChannels.splice(e,1),r.next=9;break;case 7:n.userChannels.splice(e,1),Object(T["b"])("channel",n.userChannels);case 9:r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),n.$toast("操作失败,稍后重试");case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}},R=S,N=(n("1cfdc"),Object(v["a"])(R,E,x,!1,null,"22e0406b",null)),G=N.exports,L={name:"HomeIndex",components:{ArticleList:O,ChannelEdit:G},props:{},data:function(){return{active:0,channels:[],isChannelEditShow:!1}},computed:Object(c["a"])({},Object(I["b"])(["user"])),watch:{},created:function(){this.loadChannels()},mounted:function(){},methods:{loadChannels:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=[],!t.user){e.next=10;break}return e.next=5,Object(s["e"])();case 5:r=e.sent,a=r.data,n=a.data.channels,e.next=20;break;case 10:if(i=Object(T["a"])("channel"),!i){e.next=15;break}n=i,e.next=20;break;case 15:return e.next=17,Object(s["e"])();case 17:c=e.sent,o=c.data,n=o.data.channels;case 20:t.channels=n,e.next=27;break;case 23:e.prev=23,e.t0=e["catch"](0),console.log(e.t0),t.$toast("获取失败");case 27:case"end":return e.stop()}}),e,null,[[0,23]])})))()}}},$=L,P=(n("42f4"),Object(v["a"])($,r,a,!1,null,"6dda7de6",null));e["default"]=P.exports},"86b4":function(t,e,n){"use strict";var r=n("9537"),a=n.n(r);a.a},9537:function(t,e,n){},"99af":function(t,e,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("e8b5"),c=n("861d"),s=n("7b0b"),o=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),p=n("2d00"),h=f("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",b=p>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=d("concat"),_=function(t){if(!c(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},C=!b||!g;r({target:"Array",proto:!0,forced:C},{concat:function(t){var e,n,r,a,i,c=s(this),d=u(c,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?c:arguments[e],_(i)){if(a=o(i.length),f+a>v)throw TypeError(m);for(n=0;n<a;n++,f++)n in i&&l(d,f,i[n])}else{if(f>=v)throw TypeError(m);l(d,f++,i)}return d.length=f,d}})},a630:function(t,e,n){var r=n("23e7"),a=n("4df4"),i=n("1c7e"),c=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:c},{from:a})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),f=n("7c73"),p=n("241c").f,h=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",g=a[b],_=g.prototype,C=o(f(_))==b,w=function(t){var e,n,r,a,i,c,s,o,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=m(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=l.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>a)return NaN;return parseInt(i,r)}return+l};if(i(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var O,E=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof E&&(C?d((function(){_.valueOf.call(n)})):o(n)!=b)?l(new g(w(e)),n,E):w(e)},x=r?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;x.length>j;j++)s(g,O=x[j])&&!s(E,O)&&v(E,O,h(g,O));E.prototype=_,_.constructor=E,c(a,b,E)}},bbb7:function(t,e,n){},c24f:function(t,e,n){"use strict";n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"j",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"g",(function(){return p})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return v}));n("d3b7"),n("25f0");var r=n("b775"),a=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})},c=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})},s=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})},o=function(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})},l=function(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})},u=function(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})},d=function(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/followings",params:e,data:{target:t.toString()}})},f=function(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/followers",params:e,data:{target:t.toString()}})},p=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},h=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})},v=function(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}},c740:function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c=n("ae40"),s="findIndex",o=!0,l=c(s);s in[]&&Array(1)[s]((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!l},{findIndex:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),i=n("e8b5"),c=n("23cb"),s=n("50c4"),o=n("fc6a"),l=n("8418"),u=n("b622"),d=n("1dde"),f=n("ae40"),p=d("slice"),h=f("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),m=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!p||!h},{slice:function(t,e){var n,r,u,d=o(this),f=s(d.length),p=c(t,f),h=c(void 0===e?f:e,f);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?a(n)&&(n=n[v],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(d,p,h);for(r=new(void 0===n?Array:n)(b(h-p,0)),u=0;p<h;p++,u++)p in d&&l(r,u,d[p]);return r.length=u,r}})}}]);
//# sourceMappingURL=chunk-5ddd3ac4.6678d4d1.js.map